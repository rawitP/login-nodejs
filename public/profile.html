<html>
    <head>
        <title>Profile</title>
        <script>
            window.addEventListener('DOMContentLoaded', function(event) {
                var xhttp = new XMLHttpRequest();
                xhttp.open('GET', '/api/profile');
                xhttp.send();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        var json = JSON.parse(this.responseText);
                        document.getElementById('span-name').innerHTML = json.displayName; 
                    } else if ( this.readyState == 4 && this.status == 401) {
                        window.location.href = '/';
                    }
                };
                document.getElementById('btn-logout').onclick = function(event) {
                    var xmlhttp = new XMLHttpRequest();
                    xmlhttp.onreadystatechange = function() {
                        if (this.readyState === 4 && this.status === 200) {
                            window.location.href = '/';
                        }
                    }
                    xmlhttp.open('GET', '/api/logout');
                    xmlhttp.send();
                }
            });
        </script>
    <head>
    <body>
        <span>Hello, </span><span id="span-name"></span>
        <input type="button" id="btn-logout" value="Logout"/>
    </body>
</html>
